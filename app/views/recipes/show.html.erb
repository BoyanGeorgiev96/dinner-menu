<p id="notice"><%= notice %></p>

<h2 id="recipe_name"> <%= @recipe.name %></h2>

<p>
  <strong>People quantity:</strong>
  <%= @recipe.people_quantity %>
</p>
<h4>Ingredients</h4>
<div class="ingredients_list">
  <table>
    <thead>
    <tr>
      <th>Ingredient</th>
      <th></th>
      <th colspan="3"></th>
    </tr>
    </thead>

    <tbody>
    <% @ingredients.each do |ingredient| %>
      <tr>
        <td id="ingredient_<%= ingredient.id%>">
          <% if @fridge_item_ids.include? ingredient.id %>
            <div class="check" id="check_<%=ingredient.id %>"></div>
          <% end %>
          <%recipe_ingredient = @recipe_ingredients[ingredient.id][0] %>
          <%= recipe_ingredient[:needed]%> <%= recipe_ingredient[:measurement]%> <%= ingredient[:preposition] %><%= ingredient[:name] %>
        </td>


        <%= form_with(model: @fridge_item, id: "update-quantity_#{ingredient.id}", local: false) do |form| %>
          <td><%= form.number_field :ingredient_quantity, min: 0.01, step: :any, placeholder: 0, required: true %></td>
          <%= hidden_field_tag 'on_recipe_page', true %>
          <%= hidden_field_tag :ingredient_id, ingredient.id %>
          <td><%= form.button type: 'submit', class: "button my-button", name: "plus" do %>
              <i class="fas fa-plus" aria-hidden="true"></i>
            <% end %></td>
        <% end %>
      </tr>
    <% end %>
    </tbody>
  </table>

</div>
<%= link_to 'Edit', edit_recipe_path(@recipe) %> |
<%= link_to 'Back', recipes_path %>
